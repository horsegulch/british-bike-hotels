!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.gpxbuilder=t():e.gpxbuilder=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{BaseBuilder:()=>a,GarminBuilder:()=>l,StravaBuilder:()=>p,buildGPX:()=>x});class r{constructor({lat:e,lon:t,ele:r,time:o}){this.lat=e,this.lon=t,this.ele=r,this.time=o||null}}class o extends r{constructor(e,t,{ele:o,time:n=null}={}){super({lat:e,lon:t,ele:o,time:n})}}class n{constructor({name:e,sym:t,type:r,lat:o,lon:n,ele:s,time:i}){super({lat:o,lon:n,ele:s,time:i}),this.name=e,this.sym=t,this.type=r}}class s extends n{constructor(e,t,{name:r=null,sym:s=null,type:i=null,ele:a=null,time:l=null}={}){super({name:r,sym:s,type:i,lat:e,lon:t,ele:a,time:l})}}const i={Point:o,WayPoint:s};class a{constructor(){this.data={attributes:{"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd","version":"1.1","xmlns":"http://www.topografix.com/GPX/1/1"},metadata:null,waypoints:null,tracks:[]}}setMetadata(e){this.data.metadata=e}setWaypoints(e){this.data.waypoints=e}setTracks(e){this.data.tracks=e}addTrack(e){this.data.tracks.push(e)}setSegmentPoints(e){this.addTrack({points:e})}toObject(){return this.data}static fromObject({metadata:e,waypoints:t,tracks:r}){const o=new a;return o.setMetadata(e),o.setWaypoints(t),o.setTracks(r),o}}a.MODELS=i;class l extends a{constructor(){super(),this.data.attributes["xmlns:gpxtpx"]="http://www.garmin.com/xmlschemas/TrackPointExtension/v2"}static fromObject(e){const t=super.fromObject(e);return t.data.attributes["xmlns:gpxtpx"]="http://www.garmin.com/xmlschemas/TrackPointExtension/v2",t}}class p extends l{constructor(){super(),this.data.attributes["xmlns:gpxdata"]="http://www.garmin.com/xmlschemas/GpxExtensions/v3"}static fromObject(e){const t=super.fromObject(e);return t.data.attributes["xmlns:gpxdata"]="http://www.garmin.com/xmlschemas/GpxExtensions/v3",t}}class c extends r{constructor({lat:e,lon:t,ele:r,time:o,hr:n,cad:s,speed:i,power:a,course:l,distance:p}){super({lat:e,lon:t,ele:r,time:o}),this.hr=n,this.cad=s,this.speed=i,this.power=a,this.course=l,this.distance=p}}class d extends c{constructor(e,t,{ele:r,time:o=null,hr:n=null,cad:s=null,speed:i=null,power:a=null,course:l=null,distance:p=null}={}){super({lat:e,lon:t,ele:r,time:o,hr:n,cad:s,speed:i,power:a,course:l,distance:p})}}const u={Point:d,WayPoint:s};l.MODELS=u,p.MODELS=u;const m=({version:e,encoding:t})=>`<?xml version="${e}" encoding="${t}"?>`,B=e=>{const t=e=>" ".repeat(e);return(r,o,n=0)=>{const s=t(n);return Array.isArray(o)?`${s}<${r}>
${o.map((t=>e(t,n+2))).join("
")}
${s}</${r}>`:null==o?`${s}<${r}/>`:"object"!=typeof o?`${s}<${r}>${((e="")=>e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"))(o)}</${r}>`:`${s}<${r}${(e=>{let t="";for(const r in e)t+=` ${r}="${e[r]}"`;return t})((e=>{const{value:t,...r}=e;return r})(o))}>${(e=>(e=>{let t=null;for(const r in e)if("value"===r){t=e[r];break}return t})(e))((e=>{const{value:t,...r}=e;return e}))(o)?e((e=>((e,t=0)=>{const{value:r}=e;return null==r?"":e(r,t)})(o,n+2)),""):""}
${s}</${r}>`}},f=B(((e,t=0)=>{let r="";const o=Object.keys(e);o.sort();for(const n of o)r+=h[n](e,n,t);return r})),h={attributes:()=>"",metadata:(e,t,r)=>f(t,e[t],r),waypoints:(e,t,r)=>e[t].map((e=>f("wpt",e,r))).join("
"),tracks:(e,t,r)=>e[t].map((e=>f("trk",e,r))).join("
"),name:(e,t,r)=>f(t,e[t],r),desc:(e,t,r)=>f(t,e[t],r),link:(e,t,r)=>f(t,e[t],r),time:(e,t,r)=>f(t,(o=e[t],o?o.toISOString?o.toISOString():o:null),r),lat:(e,t,r)=>{const o={value:e[t],lat:e[t]};return delete o.value,f(t,o,r)},lon:(e,t,r)=>{const o={value:e[t],lon:e[t]};return delete o.value,f(t,o,r)},points:(e,t,r)=>{return f("trkseg",e[t].map((e=>f("trkpt",e,r))),r)},ele:(e,t,r)=>f(t,e[t],r),sym:(e,t,r)=>f(t,e[t],r),type:(e,t,r)=>f(t,e[t],r),extensions:(e,t,r)=>f(t,e[t],r),hr:(e,t,r)=>f("gpxtpx:hr",e[t],r),cad:(e,t,r)=>f("gpxtpx:cad",e[t],r),speed:(e,t,r)=>f("gpxtpx:speed",e[t],r),power:(e,t,r)=>f("gpxdata:power",e[t],r),course:(e,t,r)=>f("gpxtpx:course",e[t],r),distance:(e,t,r)=>f("gpxdata:distance",e[t],r)};function x(e,t={version:"1.0",encoding:"UTF-8"}){return`${m(t)}
${f("gpx",e,0)}`}return t})()}));